{"version":3,"sources":["node_modules/browserify/node_modules/browser-pack/_prelude.js","app/js/main.js","app/js/views/appView.js","app/js/templates/app.html","app/js/views/baseView.js","app/js/views/categoriesView.js","app/js/templates/categories.html","app/js/views/productsView.js","app/js/models/categories.js","app/js/templates/products.html","app/js/views/productDetailsView.js","app/js/models/baseModel.js","app/js/models/products.js","app/js/models/subCategory.js","app/js/templates/productDetails.html","app/js/models/productDetails.js","app/js/utils/customEvent.js","app/js/models/product.js","node_modules/hbsfy/runtime.js","node_modules/simple-ajax/index.js","node_modules/browserify/node_modules/events/events.js","node_modules/handlebars/runtime.js","node_modules/handlebars/dist/cjs/handlebars.runtime.js","node_modules/handlebars/dist/cjs/handlebars/base.js","node_modules/handlebars/dist/cjs/handlebars/safe-string.js","node_modules/handlebars/dist/cjs/handlebars/exception.js","node_modules/handlebars/dist/cjs/handlebars/utils.js","node_modules/handlebars/dist/cjs/handlebars/runtime.js"],"names":["appView","require","app","document","getElementById","baseView","template","categoriesView","AppView","el","this","render","sidebarEl","prototype","module","exports","HandlebarsCompiler","compiler","main","useData","BaseView","ctx","data","model","innerHTML","Categories","ProductsView","CategoriesView","onChange","subscribe","fetch","productsView","handleSelectCategory","selectedEl","className","dataIdAttr","attributes","selectCategory","value","categoryEls","getElementsByTagName","length","i","addEventListener","evt","preventDefault","target","1","depth0","helpers","partials","stack1","each","call","subCategories","name","hash","fn","program","inverse","noop","2","alias1","lambda","alias2","escapeExpression","id","4","ProductsModel","ProductDetailsView","categoryId","handleSelectProduct","getElementsByClassName","productEls","BaseModel","subCategory","url","getSubCategoryByIndex","index","products","sku","ProductDetailsModel","CustomEvent","Ajax","onError","dataJSON","JSON","stringify","rootUrl","_getFullURL","sync","doneCb","errCb","ajax","on","resp","responseText","response","send","parse","trigger","Product","Products","getProductByIndex","SubCategory","getProductCollection","helper","helperMissing","alias3","brandThumbnailImage","shortDescription","3","ProductDetails","_callbacks","apply","arguments","cb","push","unsubscribe","splice","getProductDetails","tryParseJson","error","parseQueryString","urlParts","split","result","queryStringData","pop","parts","key","window","unescape","toQueryString","queryString","hasOwnProperty","undefined","settings","request","XMLHttpRequest","method","cors","withCredentials","XDomainRequest","emit","Error","cache","_","Date","getTime","toLowerCase","shift","event","dataType","status","open","contentType","setRequestHeader","requestedWith","auth","headerKey","headers","processData","EventEmitter","Object","create","_events","_maxListeners","isFunction","arg","isNumber","isObject","isUndefined","defaultMaxListeners","setMaxListeners","n","isNaN","TypeError","type","er","handler","len","args","listeners","Array","slice","addListener","listener","m","newListener","warned","console","trace","once","g","removeListener","fired","list","position","removeAllListeners","ret","listenerCount","emitter","base","SafeString","Exception","Utils","runtime","hb","HandlebarsEnvironment","extend","VM","spec","Handlebars","root","global","$Handlebars","noConflict","registerDefaultHelpers","instance","registerHelper","context","options","isArray","ids","createFrame","contextPath","appendContextPath","execIteration","last","first","blockParams","j","priorKey","conditional","includeZero","isEmpty","message","level","parseInt","log","obj","field","VERSION","COMPILER_REVISION","REVISION_CHANGES",5,6,"toString","objectType","constructor","logger","unregisterHelper","registerPartial","partial","unregisterPartial","methodMap","DEBUG","INFO","WARN","ERROR","object","frame","_parent","string","toHTML","node","line","column","loc","start","tmp","idx","errorProps","lineNumber","escapeChar","chr","escape","indexOf","array","possible","test","replace","badChars","params","path","&","<",">","\"","'","`","checkRevision","compilerInfo","compilerRevision","currentRevision","runtimeVersions","compilerVersions","templateSpec","env","invokePartialWrapper","resolvePartial","invokePartial","compile","compilerOptions","indent","lines","l","join","container","strict","lookup","depths","current","programs","declaredBlockParams","programWrapper","depth","merge","param","common","_setup","initData","useBlockParams","useDepths","concat","isTop","usePartial","_child","prog","Function"],"mappings":"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","file":"bundle.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","var appView = require(\"./views/appView\");\n\nvar app = new appView(document.getElementById(\"container\"));","var baseView = require(\"./baseView\");\nvar template = require(\"../templates/app.html\");\nvar categoriesView = require(\"./categoriesView\");\n\nvar AppView = function(el){\n    this.template = template;\n    this.el = el;\n    this.render();\n    var sidebarEl = document.getElementById(\"sidebar\");\n\n    this.categoriesView = new categoriesView(sidebarEl);\n};\n\nAppView.prototype = new baseView();\n\nmodule.exports = AppView;","// hbsfy compiled Handlebars template\nvar HandlebarsCompiler = require('hbsfy/runtime');\nmodule.exports = HandlebarsCompiler.template({\"compiler\":[6,\">= 2.0.0-beta.1\"],\"main\":function(depth0,helpers,partials,data) {\n    return \"<div class=\\\"row\\\">\\n    <div class=\\\"col-md-3\\\" id=\\\"sidebar\\\">\\n\\n    </div>\\n    <div class=\\\"col-md-9\\\" role=\\\"main\\\" id=\\\"main_content\\\">\\n    </div>\\n\\n</div>\";\n},\"useData\":true});\n","var BaseView = function(){\n\n};\n\n\nBaseView.prototype.render = function(ctx){\n    ctx = ctx || this;\n    var data = !ctx.model ? {} : ctx.model.data;\n    ctx.el.innerHTML = ctx.template(data);\n};\n\nmodule.exports = BaseView;","var baseView = require(\"./baseView\");\nvar template = require(\"../templates/categories.html\");\nvar Categories = require(\"../models/categories\");\nvar ProductsView = require(\"../views/productsView\");\n\nvar CategoriesView = function(el){\n\n    // Render without any data... this will show a loading screen\n    this.template = template;\n    this.el = el;\n    this.render();\n\n    // Fetch the categories. When the categories arrive this will show a list of items\n    this.model = new Categories();\n    var ctx = this;\n    this.model.onChange.subscribe(function(){\n        ctx.render();\n    });\n    this.model.fetch();\n\n    // Create a 'ProductDetailsView' which shows the products associated with this category\n    this.productsView = new ProductsView(document.getElementById(\"main_content\"));\n};\n\nCategoriesView.prototype = new baseView();\n\nCategoriesView.prototype.handleSelectCategory = function(el){\n    // Unselect the previously selected category\n    if(this.selectedEl){\n        this.selectedEl.className = \"\";\n    }\n\n    // Add the 'selected' classname to this one\n    this.selectedEl = el;\n    this.selectedEl.className = \"selected\";\n\n    // Update the products view with a new category\n    var dataIdAttr = el.attributes[\"data-id\"];\n    if(dataIdAttr){\n        this.productsView.selectCategory(dataIdAttr.value);\n    }\n}\n\nCategoriesView.prototype.render = function(){\n    baseView.prototype.render(this);\n\n    var categoryEls = this.el.getElementsByTagName(\"a\");\n    var ctx = this;\n    if(categoryEls.length > 0) {\n\n        // Bind to the click event for all of these items\n        for (var i = 0; i < categoryEls.length; i++) {\n            categoryEls[i].addEventListener(\"click\", function (evt) {\n                evt.preventDefault();\n                ctx.handleSelectCategory(evt.target);\n            });\n        }\n\n        // Select the first item, by default\n        this.handleSelectCategory(categoryEls[0]);\n    }\n};\n\nmodule.exports = CategoriesView;\n","// hbsfy compiled Handlebars template\nvar HandlebarsCompiler = require('hbsfy/runtime');\nmodule.exports = HandlebarsCompiler.template({\"1\":function(depth0,helpers,partials,data) {\n    var stack1;\n\n  return \"    <h3>Categories</h3>\\n    <ul>\\n\"\n    + ((stack1 = helpers.each.call(depth0,(depth0 != null ? depth0.subCategories : depth0),{\"name\":\"each\",\"hash\":{},\"fn\":this.program(2, data, 0),\"inverse\":this.noop,\"data\":data})) != null ? stack1 : \"\")\n    + \"    </ul>\\n\";\n},\"2\":function(depth0,helpers,partials,data) {\n    var alias1=this.lambda, alias2=this.escapeExpression;\n\n  return \"        <li><a href=\\\"#\\\" data-id=\\\"\"\n    + alias2(alias1((depth0 != null ? depth0.id : depth0), depth0))\n    + \"\\\">\"\n    + alias2(alias1((depth0 != null ? depth0.name : depth0), depth0))\n    + \"</a></li>\\n\";\n},\"4\":function(depth0,helpers,partials,data) {\n    return \"    <div>Loading...</div>\\n\";\n},\"compiler\":[6,\">= 2.0.0-beta.1\"],\"main\":function(depth0,helpers,partials,data) {\n    var stack1;\n\n  return ((stack1 = helpers['if'].call(depth0,(depth0 != null ? depth0.subCategories : depth0),{\"name\":\"if\",\"hash\":{},\"fn\":this.program(1, data, 0),\"inverse\":this.program(4, data, 0),\"data\":data})) != null ? stack1 : \"\");\n},\"useData\":true});\n","var baseView = require(\"./baseView\");\nvar template = require(\"../templates/products.html\");\nvar ProductsModel = require(\"../models/products\");\nvar ProductDetailsView = require(\"./productDetailsView\");\n\nvar ProductsView = function(el){\n    // Render the view\n    this.template = template;\n    this.el = el;\n    this.render();\n};\n\nProductsView.prototype = new baseView();\n\nProductsView.prototype.selectCategory = function(categoryId){\n    // Destroy the current model and re-render so that it shows the loading indicator\n    this.model = null;\n    this.render();\n\n    // Create a new model and then render the new data once it's ready\n    this.model = new ProductsModel(categoryId);\n    var ctx = this;\n    this.model.onChange.subscribe(function(){\n        ctx.render();\n    });\n    this.model.fetch();\n    return this.model;\n};\n\nProductsView.prototype.handleSelectProduct = function(el){\n    // Unselect the previously selected category\n    if(this.selectedEl){\n        this.selectedEl.className = \"\";\n    }\n\n    // Add the 'selected' classname to this one\n    this.selectedEl = el;\n    this.selectedEl.className = \"selected\";\n\n    // Update the products view with a new category\n    var dataIdAttr = el.attributes[\"data-id\"];\n\n    return new ProductDetailsView(this.el.getElementsByClassName(\"productDetails\")[0], dataIdAttr.value);\n};\n\nProductsView.prototype.render = function(){\n    baseView.prototype.render(this);\n\n    var productEls = this.el.getElementsByTagName(\"a\");\n    var ctx = this;\n    if(productEls.length > 0) {\n\n        // Bind to the click event for all of these items\n        for (var i = 0; i < productEls.length; i++) {\n            productEls[i].addEventListener(\"click\", function (evt) {\n                evt.preventDefault();\n                ctx.handleSelectProduct(evt.target);\n            });\n        }\n\n        // Select the first item, by default\n        this.handleSelectProduct(productEls[0]);\n    }\n};\n\nmodule.exports = ProductsView;\n","var BaseModel = require(\"./baseModel\");\nvar subCategory = require(\"./subCategory\");\n\nvar Categories = function(){\n\n};\n\nCategories.prototype = new BaseModel();\n\nCategories.prototype.url = \"Category/departments\";\n\nCategories.prototype.getSubCategoryByIndex = function(index){\n    return new subCategory(this.data.subCategories[index]);\n};\n\nmodule.exports = Categories;","// hbsfy compiled Handlebars template\nvar HandlebarsCompiler = require('hbsfy/runtime');\nmodule.exports = HandlebarsCompiler.template({\"1\":function(depth0,helpers,partials,data) {\n    var stack1;\n\n  return \"<ul>\\n\"\n    + ((stack1 = helpers.each.call(depth0,(depth0 != null ? depth0.products : depth0),{\"name\":\"each\",\"hash\":{},\"fn\":this.program(2, data, 0),\"inverse\":this.noop,\"data\":data})) != null ? stack1 : \"\")\n    + \"</ul>\\n\";\n},\"2\":function(depth0,helpers,partials,data) {\n    var alias1=this.lambda, alias2=this.escapeExpression;\n\n  return \"    <li><a href=\\\"#\\\" data-id=\\\"\"\n    + alias2(alias1((depth0 != null ? depth0.sku : depth0), depth0))\n    + \"\\\">\"\n    + alias2(alias1((depth0 != null ? depth0.name : depth0), depth0))\n    + \"</a></li>\\n\";\n},\"4\":function(depth0,helpers,partials,data) {\n    return \"<div>Loading...</div>\\n\";\n},\"compiler\":[6,\">= 2.0.0-beta.1\"],\"main\":function(depth0,helpers,partials,data) {\n    var stack1;\n\n  return ((stack1 = helpers['if'].call(depth0,(depth0 != null ? depth0.products : depth0),{\"name\":\"if\",\"hash\":{},\"fn\":this.program(1, data, 0),\"inverse\":this.program(4, data, 0),\"data\":data})) != null ? stack1 : \"\")\n    + \"<div class=\\\"productDetails\\\"></div>\\n\";\n},\"useData\":true});\n","var baseView = require(\"./baseView\");\nvar template = require(\"../templates/productDetails.html\");\nvar ProductDetailsModel = require(\"../models/productDetails\");\n\nvar ProductDetailsView = function(el, id){\n    // Render the view\n    this.template = template;\n    this.el = el;\n    this.render();\n\n    // Get the productDetails model\n    this.model = new ProductDetailsModel(id);\n    var ctx = this;\n    this.model.onChange.subscribe(function(){\n        ctx.render();\n    });\n    this.model.fetch();\n};\n\nProductDetailsView.prototype = new baseView();\n\nmodule.exports = ProductDetailsView;\n","var CustomEvent = require(\"../utils/customEvent\");\nvar Ajax = require(\"simple-ajax\");\n\n/**\n * Javascript model that corresponds with an API endpoint. Inherited by all other models.\n *\n * Similar to the Backbone Model\n *\n * @param data {Object} Initial values of the data. Optional.\n *\n * @constructor\n */\nvar BaseModel = function(data){\n    this.onChange = new CustomEvent();\n    this.onError = new CustomEvent();\n    this.data = data || {};\n    this.dataJSON = JSON.stringify(this.data);\n};\n\n/**\n * Root URL of the BestBuy API\n * @type {string}\n */\nBaseModel.prototype.rootUrl = \"/api/\";\n\n/**\n * URL of the endpoint\n */\nBaseModel.prototype.url;\n\n\nBaseModel.prototype._getFullURL = function(){\n    return this.rootUrl + this.url;\n};\n\n/**\n * Gets up to date data using Ajax; can be overridden in unit tests to allow mock data\n * @param url {string} The URL that is posted\n * @param doneCb {function} Successful callback\n * @param err {function} Callback when error occurred\n */\nBaseModel.prototype.sync = function(url, doneCb, errCb){\n    // Perform an Ajax request\n    var ajax = new Ajax(url);\n    var ctx = this;\n    ajax.on('success', function(evt){\n        var resp = {\n            data: evt.target.responseText,\n            response: evt\n        };\n        doneCb(resp);\n    });\n\n    ajax.on('error', function(evt){\n        errCb(evt);\n    });\n\n    ajax.send();\n}\n\n/**\n * Fetch the contents of that endpoint. Fires 'onChange' if the contents come back different.\n */\nBaseModel.prototype.fetch = function(){\n    var ctx = this;\n    this.sync(this._getFullURL(), function(evt){\n        // If the data changed, update the data and then fire the change event\n        if(evt.data != ctx.dataJSON) {\n            ctx.dataJSON = evt.data;\n            ctx.data = JSON.parse(ctx.dataJSON);\n            ctx.onChange.trigger(ctx);\n        }\n    }, function(evt){\n        ctx.onError.trigger(evt);\n    });\n};\n\nmodule.exports = BaseModel;","var BaseModel = require(\"./baseModel\");\nvar Product = require(\"./product\");\n\nvar Products = function(id){\n    this.id = id;\n    this.url = \"search?categoryid=\" + this.id;\n};\n\nProducts.prototype = new BaseModel();\n\nProducts.prototype.getProductByIndex = function(index){\n    return new Product(this.data.products[index]);\n};\n\nmodule.exports = Products;","var BaseModel = require(\"./baseModel\");\nvar products = require(\"./products\");\n\nvar SubCategory = function(data){\n    this.data = data;\n};\n\nSubCategory.prototype = new BaseModel();\n\nSubCategory.prototype.getProductCollection = function(){\n    return new products(this.data.id);\n};\n\nmodule.exports = SubCategory;","// hbsfy compiled Handlebars template\nvar HandlebarsCompiler = require('hbsfy/runtime');\nmodule.exports = HandlebarsCompiler.template({\"1\":function(depth0,helpers,partials,data) {\n    var helper, alias1=helpers.helperMissing, alias2=\"function\", alias3=this.escapeExpression;\n\n  return \"<div class=\\\"modal fade in\\\">\\n    <div class=\\\"modal-dialog\\\">\\n        <div class=\\\"modal-content\\\">\\n            <div class=\\\"modal-header\\\">\\n                <button type=\\\"button\\\" class=\\\"close\\\" data-dismiss=\\\"modal\\\" aria-label=\\\"Close\\\"><span aria-hidden=\\\"true\\\">&times;</span></button>\\n                <h4 class=\\\"modal-title\\\">\"\n    + alias3(((helper = (helper = helpers.name || (depth0 != null ? depth0.name : depth0)) != null ? helper : alias1),(typeof helper === alias2 ? helper.call(depth0,{\"name\":\"name\",\"hash\":{},\"data\":data}) : helper)))\n    + \"</h4>\\n            </div>\\n            <div class=\\\"modal-body\\\">\\n                <img src=\\\"\"\n    + alias3(((helper = (helper = helpers.brandThumbnailImage || (depth0 != null ? depth0.brandThumbnailImage : depth0)) != null ? helper : alias1),(typeof helper === alias2 ? helper.call(depth0,{\"name\":\"brandThumbnailImage\",\"hash\":{},\"data\":data}) : helper)))\n    + \"\\\" alt=\\\"Picture of \"\n    + alias3(((helper = (helper = helpers.name || (depth0 != null ? depth0.name : depth0)) != null ? helper : alias1),(typeof helper === alias2 ? helper.call(depth0,{\"name\":\"name\",\"hash\":{},\"data\":data}) : helper)))\n    + \"\\\"/>\\n                <p>\"\n    + alias3(((helper = (helper = helpers.shortDescription || (depth0 != null ? depth0.shortDescription : depth0)) != null ? helper : alias1),(typeof helper === alias2 ? helper.call(depth0,{\"name\":\"shortDescription\",\"hash\":{},\"data\":data}) : helper)))\n    + \"&hellip;</p>\\n            </div>\\n        </div><!-- /.modal-content -->\\n    </div><!-- /.modal-dialog -->\\n</div><!-- /.modal -->\\n\";\n},\"3\":function(depth0,helpers,partials,data) {\n    return \"<div>Loading...</div>\\n\";\n},\"compiler\":[6,\">= 2.0.0-beta.1\"],\"main\":function(depth0,helpers,partials,data) {\n    var stack1;\n\n  return ((stack1 = helpers['if'].call(depth0,(depth0 != null ? depth0.name : depth0),{\"name\":\"if\",\"hash\":{},\"fn\":this.program(1, data, 0),\"inverse\":this.program(3, data, 0),\"data\":data})) != null ? stack1 : \"\");\n},\"useData\":true});\n","var BaseModel = require(\"./baseModel\");\n\nvar ProductDetails = function(id){\n    this.id = id;\n    this.url = \"product/\" + this.id;\n};\n\nProductDetails.prototype = new BaseModel();\n\nmodule.exports = ProductDetails;","/**\n * A custom event that can be subscribed to and triggered\n * @constructor\n */\nvar CustomEvent = function(){\n    this._callbacks = [];\n};\n\n/**\n * Trigger the event\n */\nCustomEvent.prototype.trigger = function(){\n\n    // Call all of the callbacks that subscribed to this event\n    for(var i=0; i<this._callbacks.length; i++){\n        this._callbacks[i].apply(this, arguments);\n    }\n};\n\n/**\n * Subscribe a callback to the event\n * @param cb {function}\n */\nCustomEvent.prototype.subscribe = function(cb){\n    this._callbacks.push(cb);\n};\n\n/**\n * Unsubscribe a callback or all callbacks\n * @param cb {function} Optional. If null unsubscribes all callbacks\n */\nCustomEvent.prototype.unsubscribe = function(cb){\n    for(var i=this._callbacks.length - 1; i>=0; i--){\n        if(typeof(cb)==='undefined' || this._callbacks[i] == cb){\n            this._callbacks.splice(i, 1);\n        }\n    }\n};\n\nmodule.exports = CustomEvent;","var BaseModel = require(\"./baseModel\");\nvar ProductDetails = require(\"./productDetails\");\n\nvar Products = function(data){\n    this.data = data;\n    this.id = data.sku;\n};\n\nProducts.prototype = new BaseModel();\n\nProducts.prototype.getProductDetails = function(){\n    return new ProductDetails(this.id);\n};\n\nmodule.exports = Products;","module.exports = require(\"handlebars/runtime\")[\"default\"];\n","var EventEmitter = require('events').EventEmitter;\n\nfunction tryParseJson(data){\n    try{\n        return JSON.parse(data);\n    }catch(error){\n        return error;\n    }\n}\n\nfunction parseQueryString(url){\n    var urlParts = url.split('?'),\n        result = {};\n\n    if(urlParts.length>1){\n\n        var queryStringData = urlParts.pop().split('&');\n\n        for(var i = 0; i < queryStringData.length; i++) {\n            var parts = queryStringData[i].split('='),\n                key = window.unescape(parts[0]),\n                value = window.unescape(parts[1]);\n\n            result[key] = value;\n        }\n    }\n\n    return result;\n}\n\nfunction toQueryString(data){\n    var queryString = '';\n\n    for(var key in data){\n        if(data.hasOwnProperty(key) && data[key] !== undefined){\n            queryString += (queryString.length ? '&' : '?') + key + '=' + data[key];\n        }\n    }\n\n    return queryString;\n}\n\nfunction Ajax(settings){\n    var queryStringData,\n        ajax = this;\n\n    if(typeof settings === 'string'){\n        settings = {\n            url: settings\n        };\n    }\n\n    if(typeof settings !== 'object'){\n        settings = {};\n    }\n\n    ajax.settings = settings;\n    ajax.request = new window.XMLHttpRequest();\n    ajax.settings.method = ajax.settings.method || 'get';\n\n    if(ajax.settings.cors){\n        //http://www.html5rocks.com/en/tutorials/cors/\n        if ('withCredentials' in ajax.request) {\n            ajax.request.withCredentials = true;\n        } else if (typeof XDomainRequest !== 'undefined') {\n            // Otherwise, check if XDomainRequest.\n            // XDomainRequest only exists in IE, and is IE's way of making CORS requests.\n            ajax.request = new window.XDomainRequest();\n        } else {\n            // Otherwise, CORS is not supported by the browser.\n            ajax.emit('error', new Error('Cors is not supported by this browser'));\n        }\n    }\n\n    if(ajax.settings.cache === false){\n        ajax.settings.data = ajax.settings.data || {};\n        ajax.settings.data._ = new Date().getTime();\n    }\n\n    if(ajax.settings.method.toLowerCase() === 'get' && typeof ajax.settings.data === 'object'){\n        queryStringData = parseQueryString(ajax.settings.url);\n        for(var key in ajax.settings.data){\n            if(ajax.settings.data.hasOwnProperty(key)){\n                queryStringData[key] = ajax.settings.data[key];\n            }\n        }\n\n        ajax.settings.url  = ajax.settings.url.split('?').shift() + toQueryString(queryStringData);\n        ajax.settings.data = null;\n    }\n\n    ajax.request.addEventListener('progress', function(event){\n        ajax.emit('progress', event);\n    }, false);\n\n    ajax.request.addEventListener('load', function(event){\n        var data = event.target.responseText;\n\n        if(ajax.settings.dataType && ajax.settings.dataType.toLowerCase() === 'json'){\n            if(data === ''){\n                data = undefined;\n            }else{\n                data = tryParseJson(data);\n                if(data instanceof Error){\n                    ajax.emit('error', event, data);\n                    return;\n                }\n            }\n        }\n\n        if(event.target.status >= 400){\n            ajax.emit('error', event, data);\n        } else {\n            ajax.emit('success', event, data);\n        }\n\n    }, false);\n\n    ajax.request.addEventListener('error', function(event){\n        ajax.emit('error', event);\n    }, false);\n\n    ajax.request.addEventListener('abort', function(event){\n        ajax.emit('abort', event);\n    }, false);\n\n    ajax.request.addEventListener('loadend', function(event){\n        ajax.emit('complete', event);\n    }, false);\n\n    ajax.request.open(ajax.settings.method || 'get', ajax.settings.url, true);\n\n    // Set default headers\n    if(ajax.settings.contentType !== false){\n        ajax.request.setRequestHeader('Content-Type', ajax.settings.contentType || 'application/json; charset=utf-8');\n    }\n    ajax.request.setRequestHeader('X-Requested-With', ajax.settings.requestedWith || 'XMLHttpRequest');\n    if(ajax.settings.auth){\n        ajax.request.setRequestHeader('Authorization', ajax.settings.auth);\n    }\n\n    // Set custom headers\n    for(var headerKey in ajax.settings.headers){\n        ajax.request.setRequestHeader(headerKey, ajax.settings.headers[headerKey]);\n    }\n\n    if(ajax.settings.processData !== false && ajax.settings.dataType === 'json'){\n        ajax.settings.data = JSON.stringify(ajax.settings.data);\n    }\n}\n\nAjax.prototype = Object.create(EventEmitter.prototype);\nAjax.prototype.send = function(){\n    this.request.send(this.settings.data && this.settings.data);\n};\n\nmodule.exports = Ajax;","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\nfunction EventEmitter() {\n  this._events = this._events || {};\n  this._maxListeners = this._maxListeners || undefined;\n}\nmodule.exports = EventEmitter;\n\n// Backwards-compat with node 0.10.x\nEventEmitter.EventEmitter = EventEmitter;\n\nEventEmitter.prototype._events = undefined;\nEventEmitter.prototype._maxListeners = undefined;\n\n// By default EventEmitters will print a warning if more than 10 listeners are\n// added to it. This is a useful default which helps finding memory leaks.\nEventEmitter.defaultMaxListeners = 10;\n\n// Obviously not all Emitters should be limited to 10. This function allows\n// that to be increased. Set to zero for unlimited.\nEventEmitter.prototype.setMaxListeners = function(n) {\n  if (!isNumber(n) || n < 0 || isNaN(n))\n    throw TypeError('n must be a positive number');\n  this._maxListeners = n;\n  return this;\n};\n\nEventEmitter.prototype.emit = function(type) {\n  var er, handler, len, args, i, listeners;\n\n  if (!this._events)\n    this._events = {};\n\n  // If there is no 'error' event listener then throw.\n  if (type === 'error') {\n    if (!this._events.error ||\n        (isObject(this._events.error) && !this._events.error.length)) {\n      er = arguments[1];\n      if (er instanceof Error) {\n        throw er; // Unhandled 'error' event\n      }\n      throw TypeError('Uncaught, unspecified \"error\" event.');\n    }\n  }\n\n  handler = this._events[type];\n\n  if (isUndefined(handler))\n    return false;\n\n  if (isFunction(handler)) {\n    switch (arguments.length) {\n      // fast cases\n      case 1:\n        handler.call(this);\n        break;\n      case 2:\n        handler.call(this, arguments[1]);\n        break;\n      case 3:\n        handler.call(this, arguments[1], arguments[2]);\n        break;\n      // slower\n      default:\n        len = arguments.length;\n        args = new Array(len - 1);\n        for (i = 1; i < len; i++)\n          args[i - 1] = arguments[i];\n        handler.apply(this, args);\n    }\n  } else if (isObject(handler)) {\n    len = arguments.length;\n    args = new Array(len - 1);\n    for (i = 1; i < len; i++)\n      args[i - 1] = arguments[i];\n\n    listeners = handler.slice();\n    len = listeners.length;\n    for (i = 0; i < len; i++)\n      listeners[i].apply(this, args);\n  }\n\n  return true;\n};\n\nEventEmitter.prototype.addListener = function(type, listener) {\n  var m;\n\n  if (!isFunction(listener))\n    throw TypeError('listener must be a function');\n\n  if (!this._events)\n    this._events = {};\n\n  // To avoid recursion in the case that type === \"newListener\"! Before\n  // adding it to the listeners, first emit \"newListener\".\n  if (this._events.newListener)\n    this.emit('newListener', type,\n              isFunction(listener.listener) ?\n              listener.listener : listener);\n\n  if (!this._events[type])\n    // Optimize the case of one listener. Don't need the extra array object.\n    this._events[type] = listener;\n  else if (isObject(this._events[type]))\n    // If we've already got an array, just append.\n    this._events[type].push(listener);\n  else\n    // Adding the second element, need to change to array.\n    this._events[type] = [this._events[type], listener];\n\n  // Check for listener leak\n  if (isObject(this._events[type]) && !this._events[type].warned) {\n    var m;\n    if (!isUndefined(this._maxListeners)) {\n      m = this._maxListeners;\n    } else {\n      m = EventEmitter.defaultMaxListeners;\n    }\n\n    if (m && m > 0 && this._events[type].length > m) {\n      this._events[type].warned = true;\n      console.error('(node) warning: possible EventEmitter memory ' +\n                    'leak detected. %d listeners added. ' +\n                    'Use emitter.setMaxListeners() to increase limit.',\n                    this._events[type].length);\n      if (typeof console.trace === 'function') {\n        // not supported in IE 10\n        console.trace();\n      }\n    }\n  }\n\n  return this;\n};\n\nEventEmitter.prototype.on = EventEmitter.prototype.addListener;\n\nEventEmitter.prototype.once = function(type, listener) {\n  if (!isFunction(listener))\n    throw TypeError('listener must be a function');\n\n  var fired = false;\n\n  function g() {\n    this.removeListener(type, g);\n\n    if (!fired) {\n      fired = true;\n      listener.apply(this, arguments);\n    }\n  }\n\n  g.listener = listener;\n  this.on(type, g);\n\n  return this;\n};\n\n// emits a 'removeListener' event iff the listener was removed\nEventEmitter.prototype.removeListener = function(type, listener) {\n  var list, position, length, i;\n\n  if (!isFunction(listener))\n    throw TypeError('listener must be a function');\n\n  if (!this._events || !this._events[type])\n    return this;\n\n  list = this._events[type];\n  length = list.length;\n  position = -1;\n\n  if (list === listener ||\n      (isFunction(list.listener) && list.listener === listener)) {\n    delete this._events[type];\n    if (this._events.removeListener)\n      this.emit('removeListener', type, listener);\n\n  } else if (isObject(list)) {\n    for (i = length; i-- > 0;) {\n      if (list[i] === listener ||\n          (list[i].listener && list[i].listener === listener)) {\n        position = i;\n        break;\n      }\n    }\n\n    if (position < 0)\n      return this;\n\n    if (list.length === 1) {\n      list.length = 0;\n      delete this._events[type];\n    } else {\n      list.splice(position, 1);\n    }\n\n    if (this._events.removeListener)\n      this.emit('removeListener', type, listener);\n  }\n\n  return this;\n};\n\nEventEmitter.prototype.removeAllListeners = function(type) {\n  var key, listeners;\n\n  if (!this._events)\n    return this;\n\n  // not listening for removeListener, no need to emit\n  if (!this._events.removeListener) {\n    if (arguments.length === 0)\n      this._events = {};\n    else if (this._events[type])\n      delete this._events[type];\n    return this;\n  }\n\n  // emit removeListener for all listeners on all events\n  if (arguments.length === 0) {\n    for (key in this._events) {\n      if (key === 'removeListener') continue;\n      this.removeAllListeners(key);\n    }\n    this.removeAllListeners('removeListener');\n    this._events = {};\n    return this;\n  }\n\n  listeners = this._events[type];\n\n  if (isFunction(listeners)) {\n    this.removeListener(type, listeners);\n  } else {\n    // LIFO order\n    while (listeners.length)\n      this.removeListener(type, listeners[listeners.length - 1]);\n  }\n  delete this._events[type];\n\n  return this;\n};\n\nEventEmitter.prototype.listeners = function(type) {\n  var ret;\n  if (!this._events || !this._events[type])\n    ret = [];\n  else if (isFunction(this._events[type]))\n    ret = [this._events[type]];\n  else\n    ret = this._events[type].slice();\n  return ret;\n};\n\nEventEmitter.listenerCount = function(emitter, type) {\n  var ret;\n  if (!emitter._events || !emitter._events[type])\n    ret = 0;\n  else if (isFunction(emitter._events[type]))\n    ret = 1;\n  else\n    ret = emitter._events[type].length;\n  return ret;\n};\n\nfunction isFunction(arg) {\n  return typeof arg === 'function';\n}\n\nfunction isNumber(arg) {\n  return typeof arg === 'number';\n}\n\nfunction isObject(arg) {\n  return typeof arg === 'object' && arg !== null;\n}\n\nfunction isUndefined(arg) {\n  return arg === void 0;\n}\n","// Create a simple path alias to allow browserify to resolve\n// the runtime on a supported path.\nmodule.exports = require('./dist/cjs/handlebars.runtime').default;\n","\"use strict\";\n/*globals Handlebars: true */\nvar base = require(\"./handlebars/base\");\n\n// Each of these augment the Handlebars object. No need to setup here.\n// (This is done to easily share code between commonjs and browse envs)\nvar SafeString = require(\"./handlebars/safe-string\")[\"default\"];\nvar Exception = require(\"./handlebars/exception\")[\"default\"];\nvar Utils = require(\"./handlebars/utils\");\nvar runtime = require(\"./handlebars/runtime\");\n\n// For compatibility and usage outside of module systems, make the Handlebars object a namespace\nvar create = function() {\n  var hb = new base.HandlebarsEnvironment();\n\n  Utils.extend(hb, base);\n  hb.SafeString = SafeString;\n  hb.Exception = Exception;\n  hb.Utils = Utils;\n  hb.escapeExpression = Utils.escapeExpression;\n\n  hb.VM = runtime;\n  hb.template = function(spec) {\n    return runtime.template(spec, hb);\n  };\n\n  return hb;\n};\n\nvar Handlebars = create();\nHandlebars.create = create;\n\n/*jshint -W040 */\n/* istanbul ignore next */\nvar root = typeof global !== 'undefined' ? global : window,\n    $Handlebars = root.Handlebars;\n/* istanbul ignore next */\nHandlebars.noConflict = function() {\n  if (root.Handlebars === Handlebars) {\n    root.Handlebars = $Handlebars;\n  }\n};\n\nHandlebars['default'] = Handlebars;\n\nexports[\"default\"] = Handlebars;","\"use strict\";\nvar Utils = require(\"./utils\");\nvar Exception = require(\"./exception\")[\"default\"];\n\nvar VERSION = \"3.0.0\";\nexports.VERSION = VERSION;var COMPILER_REVISION = 6;\nexports.COMPILER_REVISION = COMPILER_REVISION;\nvar REVISION_CHANGES = {\n  1: '<= 1.0.rc.2', // 1.0.rc.2 is actually rev2 but doesn't report it\n  2: '== 1.0.0-rc.3',\n  3: '== 1.0.0-rc.4',\n  4: '== 1.x.x',\n  5: '== 2.0.0-alpha.x',\n  6: '>= 2.0.0-beta.1'\n};\nexports.REVISION_CHANGES = REVISION_CHANGES;\nvar isArray = Utils.isArray,\n    isFunction = Utils.isFunction,\n    toString = Utils.toString,\n    objectType = '[object Object]';\n\nfunction HandlebarsEnvironment(helpers, partials) {\n  this.helpers = helpers || {};\n  this.partials = partials || {};\n\n  registerDefaultHelpers(this);\n}\n\nexports.HandlebarsEnvironment = HandlebarsEnvironment;HandlebarsEnvironment.prototype = {\n  constructor: HandlebarsEnvironment,\n\n  logger: logger,\n  log: log,\n\n  registerHelper: function(name, fn) {\n    if (toString.call(name) === objectType) {\n      if (fn) { throw new Exception('Arg not supported with multiple helpers'); }\n      Utils.extend(this.helpers, name);\n    } else {\n      this.helpers[name] = fn;\n    }\n  },\n  unregisterHelper: function(name) {\n    delete this.helpers[name];\n  },\n\n  registerPartial: function(name, partial) {\n    if (toString.call(name) === objectType) {\n      Utils.extend(this.partials,  name);\n    } else {\n      if (typeof partial === 'undefined') {\n        throw new Exception('Attempting to register a partial as undefined');\n      }\n      this.partials[name] = partial;\n    }\n  },\n  unregisterPartial: function(name) {\n    delete this.partials[name];\n  }\n};\n\nfunction registerDefaultHelpers(instance) {\n  instance.registerHelper('helperMissing', function(/* [args, ]options */) {\n    if(arguments.length === 1) {\n      // A missing field in a {{foo}} constuct.\n      return undefined;\n    } else {\n      // Someone is actually trying to call something, blow up.\n      throw new Exception(\"Missing helper: '\" + arguments[arguments.length-1].name + \"'\");\n    }\n  });\n\n  instance.registerHelper('blockHelperMissing', function(context, options) {\n    var inverse = options.inverse,\n        fn = options.fn;\n\n    if(context === true) {\n      return fn(this);\n    } else if(context === false || context == null) {\n      return inverse(this);\n    } else if (isArray(context)) {\n      if(context.length > 0) {\n        if (options.ids) {\n          options.ids = [options.name];\n        }\n\n        return instance.helpers.each(context, options);\n      } else {\n        return inverse(this);\n      }\n    } else {\n      if (options.data && options.ids) {\n        var data = createFrame(options.data);\n        data.contextPath = Utils.appendContextPath(options.data.contextPath, options.name);\n        options = {data: data};\n      }\n\n      return fn(context, options);\n    }\n  });\n\n  instance.registerHelper('each', function(context, options) {\n    if (!options) {\n      throw new Exception('Must pass iterator to #each');\n    }\n\n    var fn = options.fn, inverse = options.inverse;\n    var i = 0, ret = \"\", data;\n\n    var contextPath;\n    if (options.data && options.ids) {\n      contextPath = Utils.appendContextPath(options.data.contextPath, options.ids[0]) + '.';\n    }\n\n    if (isFunction(context)) { context = context.call(this); }\n\n    if (options.data) {\n      data = createFrame(options.data);\n    }\n\n    function execIteration(key, i, last) {\n      if (data) {\n        data.key = key;\n        data.index = i;\n        data.first = i === 0;\n        data.last  = !!last;\n\n        if (contextPath) {\n          data.contextPath = contextPath + key;\n        }\n      }\n\n      ret = ret + fn(context[key], {\n        data: data,\n        blockParams: Utils.blockParams([context[key], key], [contextPath + key, null])\n      });\n    }\n\n    if(context && typeof context === 'object') {\n      if (isArray(context)) {\n        for(var j = context.length; i<j; i++) {\n          execIteration(i, i, i === context.length-1);\n        }\n      } else {\n        var priorKey;\n\n        for(var key in context) {\n          if(context.hasOwnProperty(key)) {\n            // We're running the iterations one step out of sync so we can detect\n            // the last iteration without have to scan the object twice and create\n            // an itermediate keys array. \n            if (priorKey) {\n              execIteration(priorKey, i-1);\n            }\n            priorKey = key;\n            i++;\n          }\n        }\n        if (priorKey) {\n          execIteration(priorKey, i-1, true);\n        }\n      }\n    }\n\n    if(i === 0){\n      ret = inverse(this);\n    }\n\n    return ret;\n  });\n\n  instance.registerHelper('if', function(conditional, options) {\n    if (isFunction(conditional)) { conditional = conditional.call(this); }\n\n    // Default behavior is to render the positive path if the value is truthy and not empty.\n    // The `includeZero` option may be set to treat the condtional as purely not empty based on the\n    // behavior of isEmpty. Effectively this determines if 0 is handled by the positive path or negative.\n    if ((!options.hash.includeZero && !conditional) || Utils.isEmpty(conditional)) {\n      return options.inverse(this);\n    } else {\n      return options.fn(this);\n    }\n  });\n\n  instance.registerHelper('unless', function(conditional, options) {\n    return instance.helpers['if'].call(this, conditional, {fn: options.inverse, inverse: options.fn, hash: options.hash});\n  });\n\n  instance.registerHelper('with', function(context, options) {\n    if (isFunction(context)) { context = context.call(this); }\n\n    var fn = options.fn;\n\n    if (!Utils.isEmpty(context)) {\n      if (options.data && options.ids) {\n        var data = createFrame(options.data);\n        data.contextPath = Utils.appendContextPath(options.data.contextPath, options.ids[0]);\n        options = {data:data};\n      }\n\n      return fn(context, options);\n    } else {\n      return options.inverse(this);\n    }\n  });\n\n  instance.registerHelper('log', function(message, options) {\n    var level = options.data && options.data.level != null ? parseInt(options.data.level, 10) : 1;\n    instance.log(level, message);\n  });\n\n  instance.registerHelper('lookup', function(obj, field) {\n    return obj && obj[field];\n  });\n}\n\nvar logger = {\n  methodMap: { 0: 'debug', 1: 'info', 2: 'warn', 3: 'error' },\n\n  // State enum\n  DEBUG: 0,\n  INFO: 1,\n  WARN: 2,\n  ERROR: 3,\n  level: 1,\n\n  // Can be overridden in the host environment\n  log: function(level, message) {\n    if (typeof console !== 'undefined' && logger.level <= level) {\n      var method = logger.methodMap[level];\n      (console[method] || console.log).call(console, message);\n    }\n  }\n};\nexports.logger = logger;\nvar log = logger.log;\nexports.log = log;\nvar createFrame = function(object) {\n  var frame = Utils.extend({}, object);\n  frame._parent = object;\n  return frame;\n};\nexports.createFrame = createFrame;","\"use strict\";\n// Build out our basic SafeString type\nfunction SafeString(string) {\n  this.string = string;\n}\n\nSafeString.prototype.toString = SafeString.prototype.toHTML = function() {\n  return \"\" + this.string;\n};\n\nexports[\"default\"] = SafeString;","\"use strict\";\n\nvar errorProps = ['description', 'fileName', 'lineNumber', 'message', 'name', 'number', 'stack'];\n\nfunction Exception(message, node) {\n  var loc = node && node.loc,\n      line,\n      column;\n  if (loc) {\n    line = loc.start.line;\n    column = loc.start.column;\n\n    message += ' - ' + line + ':' + column;\n  }\n\n  var tmp = Error.prototype.constructor.call(this, message);\n\n  // Unfortunately errors are not enumerable in Chrome (at least), so `for prop in tmp` doesn't work.\n  for (var idx = 0; idx < errorProps.length; idx++) {\n    this[errorProps[idx]] = tmp[errorProps[idx]];\n  }\n\n  if (loc) {\n    this.lineNumber = line;\n    this.column = column;\n  }\n}\n\nException.prototype = new Error();\n\nexports[\"default\"] = Exception;","\"use strict\";\n/*jshint -W004 */\nvar escape = {\n  \"&\": \"&amp;\",\n  \"<\": \"&lt;\",\n  \">\": \"&gt;\",\n  '\"': \"&quot;\",\n  \"'\": \"&#x27;\",\n  \"`\": \"&#x60;\"\n};\n\nvar badChars = /[&<>\"'`]/g;\nvar possible = /[&<>\"'`]/;\n\nfunction escapeChar(chr) {\n  return escape[chr];\n}\n\nfunction extend(obj /* , ...source */) {\n  for (var i = 1; i < arguments.length; i++) {\n    for (var key in arguments[i]) {\n      if (Object.prototype.hasOwnProperty.call(arguments[i], key)) {\n        obj[key] = arguments[i][key];\n      }\n    }\n  }\n\n  return obj;\n}\n\nexports.extend = extend;var toString = Object.prototype.toString;\nexports.toString = toString;\n// Sourced from lodash\n// https://github.com/bestiejs/lodash/blob/master/LICENSE.txt\nvar isFunction = function(value) {\n  return typeof value === 'function';\n};\n// fallback for older versions of Chrome and Safari\n/* istanbul ignore next */\nif (isFunction(/x/)) {\n  isFunction = function(value) {\n    return typeof value === 'function' && toString.call(value) === '[object Function]';\n  };\n}\nvar isFunction;\nexports.isFunction = isFunction;\n/* istanbul ignore next */\nvar isArray = Array.isArray || function(value) {\n  return (value && typeof value === 'object') ? toString.call(value) === '[object Array]' : false;\n};\nexports.isArray = isArray;\n// Older IE versions do not directly support indexOf so we must implement our own, sadly.\nfunction indexOf(array, value) {\n  for (var i = 0, len = array.length; i < len; i++) {\n    if (array[i] === value) {\n      return i;\n    }\n  }\n  return -1;\n}\n\nexports.indexOf = indexOf;\nfunction escapeExpression(string) {\n  // don't escape SafeStrings, since they're already safe\n  if (string && string.toHTML) {\n    return string.toHTML();\n  } else if (string == null) {\n    return \"\";\n  } else if (!string) {\n    return string + '';\n  }\n\n  // Force a string conversion as this will be done by the append regardless and\n  // the regex test will do this transparently behind the scenes, causing issues if\n  // an object's to string has escaped characters in it.\n  string = \"\" + string;\n\n  if(!possible.test(string)) { return string; }\n  return string.replace(badChars, escapeChar);\n}\n\nexports.escapeExpression = escapeExpression;function isEmpty(value) {\n  if (!value && value !== 0) {\n    return true;\n  } else if (isArray(value) && value.length === 0) {\n    return true;\n  } else {\n    return false;\n  }\n}\n\nexports.isEmpty = isEmpty;function blockParams(params, ids) {\n  params.path = ids;\n  return params;\n}\n\nexports.blockParams = blockParams;function appendContextPath(contextPath, id) {\n  return (contextPath ? contextPath + '.' : '') + id;\n}\n\nexports.appendContextPath = appendContextPath;","\"use strict\";\nvar Utils = require(\"./utils\");\nvar Exception = require(\"./exception\")[\"default\"];\nvar COMPILER_REVISION = require(\"./base\").COMPILER_REVISION;\nvar REVISION_CHANGES = require(\"./base\").REVISION_CHANGES;\nvar createFrame = require(\"./base\").createFrame;\n\nfunction checkRevision(compilerInfo) {\n  var compilerRevision = compilerInfo && compilerInfo[0] || 1,\n      currentRevision = COMPILER_REVISION;\n\n  if (compilerRevision !== currentRevision) {\n    if (compilerRevision < currentRevision) {\n      var runtimeVersions = REVISION_CHANGES[currentRevision],\n          compilerVersions = REVISION_CHANGES[compilerRevision];\n      throw new Exception(\"Template was precompiled with an older version of Handlebars than the current runtime. \"+\n            \"Please update your precompiler to a newer version (\"+runtimeVersions+\") or downgrade your runtime to an older version (\"+compilerVersions+\").\");\n    } else {\n      // Use the embedded version info since the runtime doesn't know about this revision yet\n      throw new Exception(\"Template was precompiled with a newer version of Handlebars than the current runtime. \"+\n            \"Please update your runtime to a newer version (\"+compilerInfo[1]+\").\");\n    }\n  }\n}\n\nexports.checkRevision = checkRevision;// TODO: Remove this line and break up compilePartial\n\nfunction template(templateSpec, env) {\n  /* istanbul ignore next */\n  if (!env) {\n    throw new Exception(\"No environment passed to template\");\n  }\n  if (!templateSpec || !templateSpec.main) {\n    throw new Exception('Unknown template object: ' + typeof templateSpec);\n  }\n\n  // Note: Using env.VM references rather than local var references throughout this section to allow\n  // for external users to override these as psuedo-supported APIs.\n  env.VM.checkRevision(templateSpec.compiler);\n\n  var invokePartialWrapper = function(partial, context, options) {\n    if (options.hash) {\n      context = Utils.extend({}, context, options.hash);\n    }\n\n    partial = env.VM.resolvePartial.call(this, partial, context, options);\n    var result = env.VM.invokePartial.call(this, partial, context, options);\n\n    if (result == null && env.compile) {\n      options.partials[options.name] = env.compile(partial, templateSpec.compilerOptions, env);\n      result = options.partials[options.name](context, options);\n    }\n    if (result != null) {\n      if (options.indent) {\n        var lines = result.split('\\n');\n        for (var i = 0, l = lines.length; i < l; i++) {\n          if (!lines[i] && i + 1 === l) {\n            break;\n          }\n\n          lines[i] = options.indent + lines[i];\n        }\n        result = lines.join('\\n');\n      }\n      return result;\n    } else {\n      throw new Exception(\"The partial \" + options.name + \" could not be compiled when running in runtime-only mode\");\n    }\n  };\n\n  // Just add water\n  var container = {\n    strict: function(obj, name) {\n      if (!(name in obj)) {\n        throw new Exception('\"' + name + '\" not defined in ' + obj);\n      }\n      return obj[name];\n    },\n    lookup: function(depths, name) {\n      var len = depths.length;\n      for (var i = 0; i < len; i++) {\n        if (depths[i] && depths[i][name] != null) {\n          return depths[i][name];\n        }\n      }\n    },\n    lambda: function(current, context) {\n      return typeof current === 'function' ? current.call(context) : current;\n    },\n\n    escapeExpression: Utils.escapeExpression,\n    invokePartial: invokePartialWrapper,\n\n    fn: function(i) {\n      return templateSpec[i];\n    },\n\n    programs: [],\n    program: function(i, data, declaredBlockParams, blockParams, depths) {\n      var programWrapper = this.programs[i],\n          fn = this.fn(i);\n      if (data || depths || blockParams || declaredBlockParams) {\n        programWrapper = program(this, i, fn, data, declaredBlockParams, blockParams, depths);\n      } else if (!programWrapper) {\n        programWrapper = this.programs[i] = program(this, i, fn);\n      }\n      return programWrapper;\n    },\n\n    data: function(data, depth) {\n      while (data && depth--) {\n        data = data._parent;\n      }\n      return data;\n    },\n    merge: function(param, common) {\n      var ret = param || common;\n\n      if (param && common && (param !== common)) {\n        ret = Utils.extend({}, common, param);\n      }\n\n      return ret;\n    },\n\n    noop: env.VM.noop,\n    compilerInfo: templateSpec.compiler\n  };\n\n  var ret = function(context, options) {\n    options = options || {};\n    var data = options.data;\n\n    ret._setup(options);\n    if (!options.partial && templateSpec.useData) {\n      data = initData(context, data);\n    }\n    var depths,\n        blockParams = templateSpec.useBlockParams ? [] : undefined;\n    if (templateSpec.useDepths) {\n      depths = options.depths ? [context].concat(options.depths) : [context];\n    }\n\n    return templateSpec.main.call(container, context, container.helpers, container.partials, data, blockParams, depths);\n  };\n  ret.isTop = true;\n\n  ret._setup = function(options) {\n    if (!options.partial) {\n      container.helpers = container.merge(options.helpers, env.helpers);\n\n      if (templateSpec.usePartial) {\n        container.partials = container.merge(options.partials, env.partials);\n      }\n    } else {\n      container.helpers = options.helpers;\n      container.partials = options.partials;\n    }\n  };\n\n  ret._child = function(i, data, blockParams, depths) {\n    if (templateSpec.useBlockParams && !blockParams) {\n      throw new Exception('must pass block params');\n    }\n    if (templateSpec.useDepths && !depths) {\n      throw new Exception('must pass parent depths');\n    }\n\n    return program(container, i, templateSpec[i], data, 0, blockParams, depths);\n  };\n  return ret;\n}\n\nexports.template = template;function program(container, i, fn, data, declaredBlockParams, blockParams, depths) {\n  var prog = function(context, options) {\n    options = options || {};\n\n    return fn.call(container,\n        context,\n        container.helpers, container.partials,\n        options.data || data,\n        blockParams && [options.blockParams].concat(blockParams),\n        depths && [context].concat(depths));\n  };\n  prog.program = i;\n  prog.depth = depths ? depths.length : 0;\n  prog.blockParams = declaredBlockParams || 0;\n  return prog;\n}\n\nexports.program = program;function resolvePartial(partial, context, options) {\n  if (!partial) {\n    partial = options.partials[options.name];\n  } else if (!partial.call && !options.name) {\n    // This is a dynamic partial that returned a string\n    options.name = partial;\n    partial = options.partials[partial];\n  }\n  return partial;\n}\n\nexports.resolvePartial = resolvePartial;function invokePartial(partial, context, options) {\n  options.partial = true;\n\n  if(partial === undefined) {\n    throw new Exception(\"The partial \" + options.name + \" could not be found\");\n  } else if(partial instanceof Function) {\n    return partial(context, options);\n  }\n}\n\nexports.invokePartial = invokePartial;function noop() { return \"\"; }\n\nexports.noop = noop;function initData(context, data) {\n  if (!data || !('root' in data)) {\n    data = data ? createFrame(data) : {};\n    data.root = context;\n  }\n  return data;\n}"]}